# {{ ansible_managed | default('Managed by Ansible') }}
# Logrotate configuration for remote syslog

{{ syslog_remote_log_dir | default('/var/log/remote') }}/*/*.log {
    {{ logrotate_frequency | default('daily') }}
    missingok
    rotate {{ syslog_retention_days | default(90) }}
{% if logrotate_compress | default(true) %}
    compress
{% endif %}
{% if logrotate_delaycompress | default(true) %}
    delaycompress
{% endif %}
    notifempty
    create 0640 {{ syslog_user | default('syslog') }} {{ syslog_group | default('adm') }}
    sharedscripts
    postrotate
        /usr/lib/rsyslog/rsyslog-rotate 2>/dev/null || true
    endscript
}
